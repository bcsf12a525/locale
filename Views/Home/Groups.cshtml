@using fyp.Models
@model fyp.Models.Student


<!DOCTYPE html>
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>AdminLTE 2 | Starter</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.5 -->
    <link rel="stylesheet" href="~/Content/css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="~/Content/dist/AdminLTE.min.css">
    <!-- AdminLTE Skins. We have chosen the skin-blue for this starter
          page. However, you can choose any other skin. Make sure you
          apply the skin class to the body tag so the changes take effect.
    -->
    <link rel="stylesheet" href="~/Content/skins/skin-blue.min.css">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->


    <script src="~/Scripts2/jquery-1.9.1.min.js"></script>
    <script src="~/Scripts2/jquery.ui.widget.js"></script>
    <script src="~/Scripts2/jquery.fileupload.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>

    <script>

        function My() {
            bootbox.dialog({

                title: "This is a form in a modal.",
                message: '<div  class="row">' +
                    '<div class="col-md-12">' +
                    '<form class="form-horizontal">' +
                    '<div class="form-group">' +
                    '<label class="col-md-4 control-label" for="name">Clas Name</label> ' +
                    '<div class="col-md-4">' +
                    '<input id="name" name="name" type="text" placeholder="Class name" class="form-control input-md"> ' +
                    '<span class="help-block">Here goes your name</span></div> ' + '</div> ' + '<div class="form-group">' +
                    '<label class="col-md-4 control-label" for="awesomeness">Privacy</label> ' +
                    ' <div class="col-md-4"><div class="radio"><label for="awesomeness-0">' +
                    '<input type="radio" name="privacy" id="awesomeness-0" value="Public" checked="checked"> ' +
                    'Public </label> ' + '</div><div class="radio"><label for="awesomeness-1">' +
                    '<input type="radio" name="privacy" id="awesomeness-1" value="Private"> Private </label> ' +
                    '</div> ' +
                    '</div></div>' +
                    '</form></div></div>'+ '<input type="button" data-url="/Wall/SavePost" value="Share" id="btnShare" data-bind="click: addGroup" class="btn btn-primary">',

                buttons: {
                    success: {

                        label: "Save",
                        className: "btn-success",
                        callback: function () {
                            var name = $('#name').val();
                            var privacy = $("input[name='privacy']:checked").val()
                            $.getJSON("/Home/Create_Group?Name=" + name + "&Privacy=" + privacy, function (data) {

                                if (data) {
                                    window.location = "/Home/Index";

                                }
                                else {
                                    alert("Username does not exist!!!")
                                    $('#user').val("");
                                    $('#pass').val("");
                                    $("input[name='btn']").prop("checked", false);

                                }

                            });
                        }
                    }
                }
            });
            $("button.ok-button").attr("data-bind", "visible: name().length");
        }
    </script>
    <script>
    $body = $("body");
    $(document).on({
        ajaxStart: function () { $body.addClass("loading"); },
        ajaxStop: function () { $body.removeClass("loading"); }
    });

    $(document).ready(function () {

        @*@{
            SSNEntities d = new SSNEntities();
            var names =  d.Resources.Select( p => p.Name);
        }

        $(".table").attr("id", names);*@

        $("#upload").click(function () {
            var data = new FormData();

            //Add the Multiple selected files into the data object
            var files = $("#files").get(0).files;

            for (i = 0; i < files.length; i++) {
                data.append("files" + i, files[i]);
            }

            //Post the data (files) to the server
            if (files.length > 0) {
                $.ajax({
                    type: 'POST',
                    url: '/Home/Upload?opt=' + $('#options').val() + '',
                    data: data,
                    contentType: false,
                    processData: false,
                    success: function (data) {


                        var fileName = data;


                        @*<td>@f.FilePath</td>
                        <td><a href="\Profile\Download\?Filename=@f.FilePath&type=@v.Name">Download</a></td>*@

                        var str = '<tr><td>' + data + '</td>';
                        str = str + '<td>';
                        str = str + '<a href= /Profile/Download/?Filename=' + fileName + '&type=' + $('#options').val() + '> Download </a></td><tr>';
                        opt = $('#options').val();
                        $("#" + opt).prepend(str);
                        alert("Successfully Uploaded!");


                        //var chk = '<p>';
                        //chk = chk + '<a href= /Home/DownloadFile?fileName=' + fileName + '&val=' + $('#options').val() + '>' + data + '</a>';

                        //$("#listt").prepend(chk);
                        //alert("Successfully Uploaded!");

                    },
                    error: function () {
                        alert("An error occurred!");
                    },
                });
            }
        });
    });
    </script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#fileupload').fileupload({
                dataType: 'json',
                url: '/Profile/UploadData?data=' + $('#options').val() + '',
                type: 'get',
                autoUpload: true,
                done: function (e, data) {
                    var id = data.result.name;
                    var ext = data.result.type;
                    //alert(ext);
                    //var newSrc= "~\Students\" +id +""\Image\" + id + ext";
                    var newSrc = "~/Students/" + id + "/";
                    newSrc = newSrc + "Image/" + id + ext;
                    //alert(newSrc);
                    //$("#img1").append('<img  class="profile-user-img img-responsive img-circle" src='+newSrc+' alt="User profile picture">');
                    //$('#img1').attr('src', "~/Images/switch.jpg");
                    //alert("here");
                    window.location.href = 'CMS';
                }

            });

            $('#AddType').click(function () {
                //var type = $('#options').val();
                //alert($("#options option:selected").text());
                var type = document.getElementById("type");
                type = type.value;
                //alert(type);
                if( type == "") {
                    return;
                }
                //var name = $("#options").val();

                //alert(ty);
                $.getJSON("/Profile/AddType?name=" + type, function (data) {
                    if (data) {
                        //alert(23);
                        location.reload(true);

                        var html = html + '<div class="box box-info">';
                        html = html + '<div class="box-header">';
                        html = html + '<h3 class="box-title">' + data + '</h3>';
                        html = html + '<div class="pull-right box-tools">';
                        html = html + '<button class="btn btn-info btn-sm" data-widget="collapse" data-toggle="tooltip" title="Collapse"><i class="fa fa-minus"></i></button>';
                        html = html + '</div>';
                        html = html + '</div>';

                        html = html + '</div>';
                        $('#panel').append(html);

                    }
                    else {

                    }


                });

            });
        });

    </script>
    <script>
            $(document).ready(function () {

                $("#sea").keyup(function () {
                    //alert("asd");
                    var user = $(this).data("id");
                    //alert(user);
                    var show_h = "0";
                    var items = [];
                    var l1 = "";
                    var br = document.getElementById("#back_result");
                    jQuery.getJSON("/Home/Search_Users", { "name": $("#sea").val() }, function (successResult) {
                        $.each(successResult, function (key, val) {
                            //  $("#i").html()
                            show_h = "1";
                            var data = val;
                            var arr = data.split(',');
                            alert(arr[3]);
                            if (arr[4] == user && arr[3] == 1) {
                                l1 = l1 + '<div class="reh"><img id="d" src="/Students/' + arr[2] + '/Image/' + arr[1] + '" width=50 height=50  />' + '<a href="/Home/User1/?id=' + arr[2] + '&&status='+arr[3]+'">' + arr[0] + '</label></div>';
                            } else if (arr[3] == 3 )
                            {
                                l1 = l1 + '<div class="reh"><img id="d" src="/Students/' + arr[2] + '/Image/' + arr[1] + '" width=50 height=50  />' + '<a href="/Home/User3/?id=' + arr[2] + '&&status=' + arr[3] + '">' + arr[0] + '</label></div>';
                            }
                        });
                        if (show_h == "0") {
                            $("#back_result").hide();
                        }
                        else if (show_h == "1") {
                            $("#back_result").show();
                        }

                        $("#back_result").html(l1);
                        l1 = "";
                    });
                });
            });
    </script>
</head>
<body class="hold-transition skin-blue sidebar-mini" ng-app="">
    <input type="hidden" id="id1" value="@Session["id"]">
    <input type="hidden" id="Gid" value="@Session["Gid"]">
    <div class="wrapper">
        <!-- Main Header -->
        <header class="main-header">
            <!-- Logo -->
            <a href="/Home/Index1" class="logo">
                <!-- mini logo for sidebar mini 50x50 pixels -->
                <span class="logo-mini"><b>S</b>SN</span>
                <!-- logo for regular state and mobile devices -->
                <span class="logo-lg"><b>e</b>l<b>e</b>ve</span>
            </a>
            <!-- Header Navbar -->
            <nav class="navbar navbar-static-top" role="navigation">
                <!-- Sidebar toggle button-->
                <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
                    <span class="sr-only">Toggle navigation</span>
                </a>
                <!-- Navbar Right Menu -->
                <div class="navbar-custom-menu">
                    <ul class="nav navbar-nav">
                        <!-- Messages: style can be found in dropdown.less-->
                        <li class="dropdown messages-menu">
                            <!-- Menu toggle button -->
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="label label-success">4</span>
                            </a>
                            <ul class="dropdown-menu">
                                <li class="header">You have 4 messages</li>
                                <li>
                                    <!-- inner menu: contains the messages -->
                                    <ul class="menu">
                                        <li>
                                            <!-- start message -->
                                            <a href="#">
                                                <div class="pull-left">
                                                    <!-- User Image -->
                                                    <img src="dist/img/user2-160x160.jpg" class="img-circle" alt="User Image">
                                                </div>
                                                <!-- Message title and timestamp -->
                                                <h4>
                                                    Support Team
                                                    <small><i class="fa fa-clock-o"></i> 5 mins</small>
                                                </h4>
                                                <!-- The message -->
                                                <p>Why not buy a new awesome theme?</p>
                                            </a>
                                        </li><!-- end message -->
                                    </ul><!-- /.menu -->
                                </li>
                                <li class="footer"><a href="#">See All Messages</a></li>
                            </ul>
                        </li><!-- /.messages-menu -->
                        <!-- Notifications Menu -->
                        <li class="dropdown notifications-menu">
                            <!-- Menu toggle button -->
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="fa fa-bell-o"></i>
                                <span class="label label-warning">10</span>
                            </a>
                            <ul class="dropdown-menu">
                                <li class="header">You have 10 notifications</li>
                                <li>
                                    <!-- Inner Menu: contains the notifications -->
                                    <ul class="menu">
                                        <li>
                                            <!-- start notification -->
                                            <a href="#">
                                                <i class="fa fa-users text-aqua"></i> 5 new members joined today
                                            </a>
                                        </li><!-- end notification -->
                                    </ul>
                                </li>
                                <li class="footer"><a href="#">View all</a></li>
                            </ul>
                        </li>
                        <!-- Tasks Menu -->
                        <li class="dropdown tasks-menu">
                            <!-- Menu Toggle Button -->
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="fa fa-flag-o"></i>
                                <span class="label label-danger">9</span>
                            </a>
                            <ul class="dropdown-menu">
                                <li class="header">You have 9 tasks</li>
                                <li>
                                    <!-- Inner menu: contains the tasks -->
                                    <ul class="menu">
                                        <li>
                                            <!-- Task item -->
                                            <a href="#">
                                                <!-- Task title and progress text -->
                                                <h3>
                                                    Design some buttons
                                                    <small class="pull-right">20%</small>
                                                </h3>
                                                <!-- The progress bar -->
                                                <div class="progress xs">
                                                    <!-- Change the css width attribute to simulate progress -->
                                                    <div class="progress-bar progress-bar-aqua" style="width: 20%" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100">
                                                        <span class="sr-only">20% Complete</span>
                                                    </div>
                                                </div>
                                            </a>
                                        </li><!-- end task item -->
                                    </ul>
                                </li>
                                <li class="footer">
                                    <a href="#">View all tasks</a>
                                </li>
                            </ul>
                        </li>
                        <!-- User Account Menu -->
                        <li class="dropdown user user-menu">
                            <!-- Menu Toggle Button -->
                            <a href="/Home/Login">
                                <img href="/Home/Login" src="\Images\switch.png" class="user-image" alt="User Image">
                                <span class="hidden-xs">Logout</span>
                            </a>

                        </li>
                        <!-- Control Sidebar Toggle Button -->

                    </ul>
                </div>
            </nav>
        </header>
        <!-- Left side column. contains the logo and sidebar -->
        <aside class="main-sidebar">
            <!-- sidebar: style can be found in sidebar.less -->
            <section class="sidebar">
                <!-- Sidebar user panel -->
                <div class="user-panel">
                    <div class="pull-left image">
                        <img src="~/Students/@Session["id"]/Image/@Session["photo"]" class="img-circle" alt="User Image">
                    </div>

                    <div class="pull-left info">
                        <a href="~/Profile/Home"><i class="fa fa-circle text-success"></i> Profile</a>
                        <a href="~/Home/CMS"><i class="fa fa-circle text-success"></i> CMS</a>
                    </div>
                </div>
                <!-- search form -->
                <!-- /.search form -->
                <form action="#" method="get" class="sidebar-form">
                    <div class="input-group">
                        <input type="text" name="sea" id="sea" class="form-control" placeholder="Search..." data-id="@Session["id"]" />
                        <span class="input-group-btn">
                            <button type="submit" name="search" id="search-btn" class="btn btn-flat"><i class="fa fa-search"></i></button>
                        </span>

                    </div>
                    <br />
                    <div class="DivWithScroll" style="background-color:gainsboro" id="back_result">

                    </div>
                </form>
                <!-- sidebar menu: : style can be found in sidebar.less -->
                <ul class="sidebar-menu">
                    <li class="header"></li>
                    <!-- Optionally, you can add icons to the links -->
                    <li class="treeview">
                        <button data-bind="click:select1">Button</button>
                        @*<a href="javascript:My()"><i class="fa fa-link"></i> <span>Create Group</span> <i class="fa fa-angle-left pull-right"></i></a>*@

                    </li>

                    
                    <li class="treeview">
                        <a href="#"><i class="fa fa-link"></i> <span>Classes</span> <i class="fa fa-angle-left pull-right"></i></a>
                        <ul class="treeview-menu" data-bind="foreach: groups">
                            <li><a data-bind="attr: { href: Url , text: Name}"></a></li>

                        </ul>
                    </li>
                    <li class="treeview">
                        <a href="~/Home/CMS"><i class="fa fa-link"></i> <span>Resources</span> <i class="fa fa-angle-left pull-right"></i></a>
                        
                    </li>
                    
                </ul>
            </section>
            <!-- /.sidebar -->
        </aside>
        <!-- Content Wrapper. Contains page content -->
        <div class="content-wrapper">
            <!-- Content Header (Page header) -->
            @*<section class="content-header">
                    <h1>
                        Profile
                    </h1>

                </section>*@
            <!-- Main content -->
            
            <section class="content">
                <h2>@Session["Grp_Name"]</h2>
                <div class="row">
                    <!-- /.col -->
                    <div class="col-md-9">
                        <div class="nav-tabs-custom">
                            <ul class="nav nav-tabs">
                                <li class="active"><a href="#activity" data-toggle="tab">Activity</a></li>
                                <li ><a href="#members" data-toggle="tab">Members</a></li>
                                <li ><a href="#timeline" data-toggle="tab">Resources</a></li>

                               



                            </ul>
                            <div class="tab-content">
                                <div class="active tab-pane" id="activity">
                                    <div class="panel-body">
                                        <br></br>
                                        <form method="post">
                                            <div class="publishContainer">
                                                <div class="form-group" style="padding:0" data-bind="value: @Session["id"]">
                                                    <input type="hidden" name="PostType" value="Home">
                                                    <textarea placeholder="Write something here..." class="form-control" rows="8" name="Description" id="txtMessage" style="height:90px; data-bind=" value newMessage, jqAutoresize {}" cols="90"></textarea><hr />

                                                </div>

                                                <div class="col-md-5">

                                                </div>
                                                <div class=" col-md-3">


                                                </div>
                                                <div class=" col-md-3">


                                                </div>
                                                <div class="col-md-1" style="padding:0">
                                                    @*<button class="btn btn-primary" data-id="@Session["name"]" " data-path="@Model.Image" onclick="func()" id="pst">Post</button>*@
                                                    <input type="button" data-url="/Wall/SavePost" value="Share" id="btnShare" data-bind="click: addPost" class="btn btn-primary">
                                                </div>
                                            </div>
                                        </form>
                                        <br><br>
                                        <div id="post1">

                                            <div class="notification" data-bind="visible: newPosts().length > 0" data-user="@Session["id"]>
                                        <a data-bind=" click:loadNewPosts">
                                                </a>
                                            </div>
                                            <div id="msgHolder" data-bind="foreach: posts">
                                                <div class="user-block">
                                                    <img class="img-circle img-bordered-sm" width="4000" height="236" data-bind="attr: { src: PostedByAvatar }" alt="user image">
                                                    <span class="username">
                                                        <span></span><a href="#" data-bind="text: PostedByName"></a>

                                                        <a href="#" class="btn pull-right btn-box-tool">
                                                            <i class="fa fa-times">

                                                            </i>
                                                        </a>
                                                    </span>
                                                    <span>
                                                        <span class="description timeago" data-bind="text: PostedDate"></span>

                                                    </span>
                                                    <br></br>
                                                    <p style="font-size:16px;">
                                                        <b data-bind="html:Message "></b></pstyle="font-family:courier;>


                                                        @*</div><p><a data-bind="text: PostedByName"></a>: <span data-bind="html:Message"></span></p>*@
                                                </div>


                                                <ul class="list-inline">

                                                    <li><a href="#" class="link-black text-sm"><i class="fa fa-share margin-r-5"></i> Share</a></li>

                                                    <li><a href="#" class="link-black text-sm"><i class="fa fa-thumbs-o-up margin-r-5"></i> Like</a></li>

                                                    <li class="pull-right"><a href="#" class="link-black text-sm"><i class="fa fa-comments-o margin-r-5"></i> Comments (5)</a></li>
                                                </ul>
                                                <a class="commentNotification" data-bind="click: loadNewComments, visible: NewComments().length > 0"> <span data-bind="text:NewComments().length"></span> new comment(s)</a>
                                                <div class="commentSection">
                                                    <div>
                                                        <div data-bind="foreach: PostComments">
                                                            <div style="padding:0">
                                                                <img style="margin-top:0" height="40" width="40" data-bind="attr: { src: CommentedByAvatar }">
                                                                <p><a style="margin-bottom: 10px; font-weight: 700; color: #217AA2" data-bind="text: CommentedByName"></a><span data-bind="html:Message"></span></p>
                                                                <div class="commentFooter"> <span class="timeago" data-bind="text: CommentedDate"></span>&nbsp;</div>
                                                            </div>
                                                        </div>
                                                    </div>





                                                    <div id="' + id + '"><input class="form-control input-sm" data-bind="value: newCommentMessage,event:{keyup: addComment}, jqAutoresize: {}" id="bttn" type="text" placeholder="Type a comment"></div>

                                                </div>
                                            </div>
                                            <br></br>

                                            @section scripts {

                                                <script src="~/Script1/jquery.signalR-2.1.1.min.js"></script>
                                                <!--Reference the autogenerated SignalR hub script. -->
                                                <script src="~/signalr/hubs"></script>
                                                <script src="~/Script1/jquery.autosize.min.js"></script>
                                                <script src="~/Script1/jquery.timeago.js"></script>
                                                <script src="~/Script1/knockout-2.2.0.js"></script>
                                                <script src="~/Script1/GroupPosts.js"></script>

                                            }





                                        </div>


                                    </div>
                                </div>
                                <div class="tab-pane" id="members">
                                    <div style="background-color:#ecf0f5" ;>
                                        <div class="box box-danger">

                                            <div class="box-header with-border">
                                                <h3 class="box-title">Members</h3>
                                                <div class="box-tools pull-right">

                                                </div>
                                            </div><!-- /.box-header -->
                                            <div class="box-body no-padding">
                                                <ul class="users-list clearfix" data-bind="foreach: members" >
                                                    <li>
                                                        <img data-bind="attr:{src:Image}" alt="User Image" style="width:65.75px;height:65.75px;">
                                                        <a class="users-list-name" data-bind="attr: {  href: Url},text:Name" ></a>
                                                       
                                                    </li>
                                               
                                                </ul><!-- /.users-list -->
                                            </div><!-- /.box-body -->
                                            <div class="box-footer text-center">
                                                <a href="javascript::" class="uppercase">View All Users</a>
                                            </div><!-- /.box-footer -->
                                        </div><!--/.box -->
                                        </div>
                                    </div>
                                    <!-- /.tab-pane -->
                                    <div class="tab-pane" id="timeline">

                                        <div class="panel-body">
                                            <div style="background-color:#ecf0f5" ;>
                                                <section class="content-header">
                                                    <h1>
                                                        Resources
                                                    </h1>

                                                </section>
                                                <section class="content">
                                                    <section class="content">
                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <div class="col-md-2">
                                                                    <label>Add Category</label>
                                                                </div>
                                                                <div class="col-md-3">
                                                                    <input placeholder="Enter category name" id="type" type="text" class="form-control" />
                                                                </div>
                                                                <div class="col-md-1">
                                                                    <input id="AddType" value="Add" type="button" class="btn btn-primary" />
                                                                </div>
                                                                <br></br>

                                                                <div class="col-md-2">
                                                                    <label>Upload File</label>
                                                                </div>
                                                                <div class="col-md-3">
                                                                    <input id="files" type="file" />
                                                                    <input type="button" id="upload" value="Upload" />
                                                                </div>
                                                                <div class="col-md-2">
                                                                    <label>Select Category</label>
                                                                </div>

                                                                <div class="col-md-4">
                                                                    <select id="options" name="Privacy">
                                                                        @{
                                                                            SSNEntities db = new SSNEntities();
                                                                            int id = Convert.ToInt32(Session["id"]);
                                                                            var obj = db.Resources.Where(s => s.UserId == id);
                                                                            if (obj != null)
                                                                            {
                                                                                foreach (var v in obj)
                                                                                {
                                                                        <option value="@v.Name">@v.Name</option>
                                                                                }
                                                                            }
                                                                            else
                                                                            {
                                                                        <option>none</option>
                                                                            }

                                                                        }



                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <br></br>
                                                            <br></br>
                                                            <br></br>
                                                            <div id="panel" class="col-md-12">
                                                                @foreach (var v in obj)
                                                                {
                                                            <div class="box box-info">
                                                                <div class="box-header">
                                                                    <h3 class="box-title">@v.Name</h3>
                                                                    <!-- tools box -->
                                                                    <div class="pull-right box-tools">
                                                                        <button class="btn btn-info btn-sm" data-widget="collapse" data-toggle="tooltip" title="Collapse"><i class="fa fa-minus"></i></button>
                                                                    </div><!-- /. tools -->
                                                                </div><!-- /.box-header -->
                                                                <div class="box-body pad">
                                                                    @{
                                                                                SSNEntities db1 = new SSNEntities();
                                                                                int id1 = Convert.ToInt32(Session["id"]);
                                                                                var files = db1.Files.Where(p => p.CId == v.CId).ToList();

                                                                                if (files.Count != 0)
                                                                                {
                                                                            <table class="table" id="@v.Name">
                                                                                @foreach (var f in files)
                                                                                        {
                                                                                        <tr>
                                                                                            <td>@f.FilePath</td>
                                                                                            <td><a href="\Profile\Download\?Filename=@f.FilePath&type=@v.Name">Download</a></td>

                                                                                        </tr>
                                                                                        }
                                                                            </table>
                                                                                }

                                                                    }


                                                                    @*<div id="listt">
                                                @{
                                                    ViewBag.Title = "Download Files";
                                                    var Files = (ViewBag.Files as string[]);

                                                    if (Files != null && Files.Any())
                                                    {
                                                        foreach (var file in Files)
                                                        {
                                                            <br />
                                                            @Html.ActionLink(file, "DownloadFile", new { fileName = file })
                                                            <br />

                                                        }
                                                    }
                                                    else
                                                    {
                                                        <label>No File(s) to Download</label>
                                                    }
                                                }
                                            </div>*@

                                                                </div>




                                                            </div><!-- /.box -->
                                                                                }

                                                            </div><!-- /.col-->
                                                        </div><!-- ./row -->
                                                    </section><!-- /.content -->
                                            </div>
                                        </div>
                                    </div>
                                </div><!-- /.tab-content -->
                        </div><!-- /.nav-tabs-custom -->
                    </div><!-- /.col -->
                </div><!-- /.row -->
            </section><!-- /.content -->
        </div>
        <footer class="main-footer">
            <div class="pull-right hidden-xs">
                <b>Version</b> 2.3.0
            </div>
            <strong>Copyright &copy; 2014-2015 <a href="http://almsaeedstudio.com">Almsaeed Studio</a>.</strong> All rights reserved.
        </footer>
        <!-- Control Sidebar -->
        <aside class="control-sidebar control-sidebar-dark">
            <!-- Create the tabs -->
            <ul class="nav nav-tabs nav-justified control-sidebar-tabs">
                <li><a href="#control-sidebar-home-tab" data-toggle="tab"><i class="fa fa-home"></i></a></li>
                <li><a href="#control-sidebar-settings-tab" data-toggle="tab"><i class="fa fa-gears"></i></a></li>
            </ul>
            <!-- Tab panes -->
            <div class="tab-content">
                <!-- Home tab content -->
                <div class="tab-pane" id="control-sidebar-home-tab">
                    <h3 class="control-sidebar-heading">Recent Activity</h3>
                    <ul class="control-sidebar-menu">
                        <li>
                            <a href="javascript::;">
                                <i class="menu-icon fa fa-birthday-cake bg-red"></i>
                                <div class="menu-info">
                                    <h4 class="control-sidebar-subheading">Langdon's Birthday</h4>
                                    <p>Will be 23 on April 24th</p>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="javascript::;">
                                <i class="menu-icon fa fa-user bg-yellow"></i>
                                <div class="menu-info">
                                    <h4 class="control-sidebar-subheading">Frodo Updated His Profile</h4>
                                    <p>New phone +1(800)555-1234</p>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="javascript::;">
                                <i class="menu-icon fa fa-envelope-o bg-light-blue"></i>
                                <div class="menu-info">
                                    <h4 class="control-sidebar-subheading">Nora Joined Mailing List</h4>
                                    <p>nora@example.com</p>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="javascript::;">
                                <i class="menu-icon fa fa-file-code-o bg-green"></i>
                                <div class="menu-info">
                                    <h4 class="control-sidebar-subheading">Cron Job 254 Executed</h4>
                                    <p>Execution time 5 seconds</p>
                                </div>
                            </a>
                        </li>
                    </ul><!-- /.control-sidebar-menu -->
                    <h3 class="control-sidebar-heading">Tasks Progress</h3>
                    <ul class="control-sidebar-menu">
                        <li>
                            <a href="javascript::;">
                                <h4 class="control-sidebar-subheading">
                                    Custom Template Design
                                    <span class="label label-danger pull-right">70%</span>
                                </h4>
                                <div class="progress progress-xxs">
                                    <div class="progress-bar progress-bar-danger" style="width: 70%"></div>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="javascript::;">
                                <h4 class="control-sidebar-subheading">
                                    Update Resume
                                    <span class="label label-success pull-right">95%</span>
                                </h4>
                                <div class="progress progress-xxs">
                                    <div class="progress-bar progress-bar-success" style="width: 95%"></div>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="javascript::;">
                                <h4 class="control-sidebar-subheading">
                                    Laravel Integration
                                    <span class="label label-warning pull-right">50%</span>
                                </h4>
                                <div class="progress progress-xxs">
                                    <div class="progress-bar progress-bar-warning" style="width: 50%"></div>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="javascript::;">
                                <h4 class="control-sidebar-subheading">
                                    Back End Framework
                                    <span class="label label-primary pull-right">68%</span>
                                </h4>
                                <div class="progress progress-xxs">
                                    <div class="progress-bar progress-bar-primary" style="width: 68%"></div>
                                </div>
                            </a>
                        </li>
                    </ul><!-- /.control-sidebar-menu -->
                </div><!-- /.tab-pane -->
                <!-- Stats tab content -->
                <div class="tab-pane" id="control-sidebar-stats-tab">Stats Tab Content</div><!-- /.tab-pane -->
                <!-- Settings tab content -->
                <div class="tab-pane" id="control-sidebar-settings-tab">
                    <form method="post">
                        <h3 class="control-sidebar-heading">General Settings</h3>
                        <div class="form-group">
                            <label class="control-sidebar-subheading">
                                Report panel usage
                                <input type="checkbox" class="pull-right" checked>
                            </label>
                            <p>
                                Some information about this general settings option
                            </p>
                        </div><!-- /.form-group -->
                        <div class="form-group">
                            <label class="control-sidebar-subheading">
                                Allow mail redirect
                                <input type="checkbox" class="pull-right" checked>
                            </label>
                            <p>
                                Other sets of options are available
                            </p>
                        </div><!-- /.form-group -->
                        <div class="form-group">
                            <label class="control-sidebar-subheading">
                                Expose author name in posts
                                <input type="checkbox" class="pull-right" checked>
                            </label>
                            <p>
                                Allow the user to show his name in blog posts
                            </p>
                        </div><!-- /.form-group -->
                        <h3 class="control-sidebar-heading">Chat Settings</h3>
                        <div class="form-group">
                            <label class="control-sidebar-subheading">
                                Show me as online
                                <input type="checkbox" class="pull-right" checked>
                            </label>
                        </div><!-- /.form-group -->
                        <div class="form-group">
                            <label class="control-sidebar-subheading">
                                Turn off notifications
                                <input type="checkbox" class="pull-right">
                            </label>
                        </div><!-- /.form-group -->
                        <div class="form-group">
                            <label class="control-sidebar-subheading">
                                Delete chat history
                                <a href="javascript::;" class="text-red pull-right"><i class="fa fa-trash-o"></i></a>
                            </label>
                        </div><!-- /.form-group -->
                    </form>
                </div><!-- /.tab-pane -->
            </div>
        </aside><!-- /.control-sidebar -->
    </div>
    <!-- REQUIRED JS SCRIPTS -->
    <!-- jQuery 2.1.4 -->
    <!-- Bootstrap 3.3.5 -->
    <script src="~/Scripts/js/bootstrap.min.js"></script>
    <!-- AdminLTE App -->
    <script src="~/Scripts/dist/js/app.min.js"></script>
    <!-- Optionally, you can add Slimscroll and FastClick plugins.
         Both of these plugins are recommended to enhance the
         user experience. Slimscroll is required when using the
         fixed layout. -->
    <script type="text/javascript">



        $('#pst').click(function (e) {
            //alert("post called");
            e.preventDefault();
            var status = document.getElementById("status").value;
            if (status == "") {
                return;
            }
            var a = $(this).data('id');
            var img = $(this).data('image');
            var ext = $(this).data('path');
            
            var today = new Date();

            h = today.getHours();
            if (h < 10) {
                h = "0" + h;
            }
            else if (h > 12) {
                h = h - 12;
            }
            m = today.getMinutes();
            if (m < 10) {
                m = "0" + m;
            }
            var id = null;
            var a = $(this).data('id');
            //alert(status);
            $.getJSON("/Home/Update_Status?status=" + status, function (data) {

                if (data) {

                    id = data;

                    alert(id);
                    var chk = '<div id=' + id + ' ><div class="user-block"> <img class="img-circle img-bordered-sm" src="/Students/' + img + '/Image/' + ext + '" alt="user image"><span class="username"><a href="#">' + a + '</a><a href="#" class="pull-right btn-box-tool"><i class="fa fa-times"></i></a></span><span class="description">Shared publicly ' + h + ':' + m + '- today</span>';
                    chk = chk + "</div><p >" + status + "</p></div>";
                    chk = chk + '<ul class="list-inline">';
                    chk = chk + '<li><a href="#" class="link-black text-sm"><i class="fa fa-share margin-r-5"></i> Share</a></li>';
                    chk = chk + '<li><a href="#" class="link-black text-sm"><i class="fa fa-thumbs-o-up margin-r-5"></i> Like</a></li>';
                    chk = chk + '<li class="pull-right"><a href="#" class="link-black text-sm"><i class="fa fa-comments-o margin-r-5"></i> Comments (5)</a></li></ul>';
                    chk = chk + '<div id="' + id + '"><input class="form-control input-sm" onKeyDown="key()" id="bttn" type="text" placeholder="Type a comment"></div></div>';
                    $("#post1").prepend(chk);
                    $("#status").val("");
                    alert($("bb").closest("div").attr("id"));
                    window.location.reload();
                }
                else {




                }

            });







            //var next = 1;
            //var addto = "#post";
            //var dd = "<div class="user-block">"
            //var newIn = '<input autocomplete="off" class=" input form-control col-md-1 " id="field' + next + '" name="field' + next + '" type="text">';
            //var newInput = $(newIn);
            //$('#post').after(newInput);

            //alert("hello");

        });
        document.getElementById('foo').onkeypress = function (e) {
            if (!e) e = window.event;
            var keyCode = e.keyCode || e.which;
            if (keyCode == '13') {
                // Enter pressed
                return false;
            }
        }
        $("#bb").keyup(function (event) {
            if (event.keyCode == 13) {
                $("#id_of_button").click();
            }
        });
        function myscript(e, i) {
            if (e.keycode == 13) {
                alert("here");
            }
        }

        var wage = document.getElementById("bb");

        document.addEventListener("keydown", function (e) {
            if (e.keyCode === 13) {  //checks whether the pressed key is "Enter"
                alert("kk");
            }
        });

        function key() {
            document.getElementById('bttn').onkeydown = function (event) {
                if (event.keyCode == 13) {
                    $("bttn").closest("div").attr("id");
                }
            }
        }

        //$("#bttn").keypress(function (event) {
        //    if (event.which == 13) {
        //        validate();
        //        alert("You pressed enter");
        //    }
        //});
    </script>
</body>
</html>
